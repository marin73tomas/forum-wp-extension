function fmwp_resize_popup(){var p=["reply","topic"];jQuery.each(p,function(e){if(jQuery("#fmwp-"+p[e]+"-popup-editor").length){var t=jQuery("#fmwp-"+p[e]+"-popup-editor").outerHeight();t=t-jQuery("#fmwp-"+p[e]+"-popup-editor").find(".mce-statusbar").outerHeight()-jQuery("#fmwp-"+p[e]+"-popup-editor").find(".mce-top-part").outerHeight()-1,jQuery("#fmwp"+p[e]+"content_ifr").css("height",t+"px")}})}function fmwp_extractLast(e){return e.split(" ").pop()}function fmwp_extract_string(e){return e.split(" ")}function fmwp_autocomplete_mentions(){var e=jQuery("#fmwp-reply-popup-editor, #fmwp-topic-popup-editor");0!==e.length&&e.each(function(){var i=jQuery(this).data("editor-id"),e=jQuery("#"+i);if(0!==e.length){if(void 0===jQuery.ui)return!1;var t=e.autocomplete({minLength:1,appendTo:"#wp-"+i+"-editor-container",position:{my:"left top",at:"left bottom"},source:function(e,t){var p=fmwp_extractLast(e.term).replace("<p>","").replace("</p>","");"@"===p.charAt(0)&&jQuery.getJSON(wp.ajax.settings.url+"?action=fmwp_get_user_suggestions&term="+p.trim()+"&nonce="+fmwp_front_data.nonce+"&_wpnonce="+wpApiSettings.nonce,function(e){t(e)})},select:function(e,t){var p=fmwp_extract_string(this.value);p.pop(),p.push(t.item.replace_item),p.push("");var o=tinymce.get(i);return o&&o instanceof tinymce.Editor&&(o.setContent(jQuery.trim(p.join(" "))+"&nbsp;",{format:"html"}),tinymce.activeEditor.focus(),tinymce.activeEditor.selection.select(tinymce.activeEditor.getBody(),!0),tinymce.activeEditor.selection.collapse(!1)),e.preventDefault(),e.stopPropagation(),!1}});void 0!==t.data("ui-autocomplete")&&(t.data("ui-autocomplete")._renderItem=function(e,t){return jQuery("<li />").data("item.autocomplete",t).append(t.list_item).appendTo(e)}),void 0!==t.data("ui-autocomplete")&&(t.data("ui-autocomplete")._resizeMenu=function(){this.menu.element.outerWidth(400)})}})}jQuery(document).ready(function(t){t(document.body).on("click",".fmwp-post-popup-action-fullsize",function(){var e=t(this).parents(".fmwp-post-popup-wrapper");e.hasClass("fmwp-fullsize")?e.removeClass("fmwp-fullsize"):e.addClass("fmwp-fullsize"),fmwp_resize_popup(),fmwp_responsive()}),t(window).on("resize",function(){fmwp_resize_popup()}).on("load",fmwp_resize_popup())});